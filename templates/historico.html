{% extends "base.html" %}
{% block conteudo %}
<h2>Histórico de Acessos</h2>

<!-- Acessos de hoje -->
<h4 class="mt-4">Acessos de Hoje ({{ hoje }})</h4>
<table class="table table-striped table-bordered">
  <thead class="table-success">
    <tr>
      <th>Usuário</th>
      <th>Horário</th>
      <th>Data</th>
    </tr>
  </thead>
  <tbody>
    {% for acesso in historico_hoje %}
      <tr>
        <td>{{ acesso.usuario }}</td>
        <td>{{ acesso.horario }}</td>
        <td>{{ acesso.data }}</td>
      </tr>
    {% else %}
      <tr><td colspan="3" class="text-center">Nenhum acesso hoje.</td></tr>
    {% endfor %}
  </tbody>
</table>

<hr/>

<!-- Histórico geral agrupado por data -->
<h4 class="mt-5">Histórico Geral (agrupado por data)</h4>

{% if acessos_por_data %}
  {% for data, acessos in acessos_por_data.items() %}
    <h5 class="mt-4">{{ data }}</h5>
    <table class="table table-bordered">
      <thead class="table-light">
        <tr>
          <th>Usuário</th>
          <th>Horário</th>
        </tr>
      </thead>
      <tbody>
        {% for acesso in acessos %}
        <tr>
          <td>{{ acesso.usuario }}</td>
          <td>{{ acesso.horario }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  {% endfor %}
{% else %}
  <p class="text-center">Nenhum acesso registrado ainda.</p>
{% endif %}
{% endblock %}
